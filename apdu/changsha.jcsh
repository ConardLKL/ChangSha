#卡号：4100000099999432
#传输密钥FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF

#选择交通卡 aid和appletid注册时相同
/send 00A4040009A00000000386980700

#选择PSE 1PAY.SYS.DDF01 315041592E5359532E4444463031
/send 00A404000E315041592E5359532E4444463031

#以下是个人化部分



#外部认证 
#取随机数 测试返回固定数据41 42 43 44 
/send 008400000004
#外部认证 数据=4字节随机数(41 42 43 44) +00000000
#使用传输密钥加密
/send 00820000089B5D0928B9D646B17f



#写安全认证识别码，兼容华大智宝指令
#UID = '88D32B76'
/send 00220000098588D32B7688D32B767f



#卡片主控密钥
/send 008400000004
#传输密钥
#cardControl
#84 D4 p1密钥类型 p2密钥索引 长度 transKey(长度 版本信息 算法标识 错误计数器 后续安全状态 16字节密钥 800000) + mac
/send 84D439001CD0149E3657632A60ADCFD9E4E2547144B820E5BBF516DFC8CEF6371A


#卡片维护密钥
#Key Name = CARD_MANAGE_KEY
#FuncKey=58B860693E4F13DD11EE471349E2F1DC
/send 008400000004
#84 D4 p1密钥类型 p2密钥索引 长度 cardControl(长度 版本信息 算法标识 错误计数器 后续安全状态 16字节密钥 800000) + mac
/send 84D436001C6CE46DBBB86B5A6D000237A270C215586EE4AF0A8C0C335B72643BE7




#建立发行基本信息文件SFI0x05 文件类型二进制0x28 长度0x00 0x28
# update 0005
# 文件格式：
# 2 发卡方代码 -可配置 默认值0731
# 2 城市代码 -可配置 默认值4100
# 2 行业代码 -可配置 默认值0000
# 1 测试标记 -可配置 默认值00 正常卡
# 1 保留数据 - 00 固定值 
# 8 应用序列号（逻辑卡号） - 逻辑卡号
# 2 卡类型 -可配置 默认值 0200 成人普通储值票 
# 4 发行日期 - 卡的系统发行日期，取实际日期
# 6 发行设备信息 - 可配置 
# 2 卡版本号 -可配置 卡应用逻辑数据结构版本 默认值 0001
# 4 卡启动日期 -可配置 卡在系统中可应用使用的起始日期
# 4 卡有效日期 -可配置 在此日期前卡片有效
# 2 保留 -0000 固定值
#格式要求：100X XXXX sfi=0x05=0000 0101 写文件内容0x85=1000 0101
#String sfi05 = "04D68500 2C 0731  4100  0000  00  00" + card_no + "0200  20150605  000F00000001  0001  20150605  20380808  0000";
/send 008400000004
/send 04D685002C07314100000000004100000099999432020020150605000F00000001000120150605203808080000833DA7F7




#select 钱包应用 return FCI
/send 00A4040009A000000003869807017f

#应用主控密钥
##84 D4 p1密钥类型 p2密钥索引 长度0x14=20 版本信息 算法标识 错误计数器 后续安全状态 密钥16字节 
#Key Name = CAPP_MANAGE_KEY
#FuncKey=37C17EFA48C5C513489E5EB6C7AF939A

#Key Name = APP_CONTROL_KEY
#FuncKey=EBEC8FCAFF6F91ACD3938011A1536854
/send 008400000004
/send 84D439001C6D17C5C509C5355693CFA1E4D9AAFE8DA204AF3DAAB2E8D453BA72C6

#应用维护密钥
#Key Name = APP_MANAGE_KEY
#FuncKey=8F9370265BE85FB3FB5A31AF8C9F0B5D
/send 008400000004
/send 84D450001CF613758F3B6602722A831C9D124A679007DAB08C5A9DA624E5B9EBBA

#应用维护密钥1
#Key Name = FILE_MANAGE1_KEY
#FuncKey=AE4E2A2D035E159D57E02E5483DC3F68
/send 008400000004
/send 84D436001CBF645B8568858E17897F3A36312D346F826D481934F6AE1FE8412EF3

#应用维护密钥2
#Key Name = FILE_MANAGE2_KEY
#FuncKey=687F19B93825C00731A66205A9660CC4
/send 008400000004
/send 84D436011C5C394D1D6A1FEB5A5E409CD85BD8457D15942AE08A91B54B5CAE6CB8


#复合消费交易维护密钥
#/send 008400000004
#/send 84D403011C51005EB2E0E78D5F33DD1BEA0BA0C264D5944D7BBF603DA49EDAC5BF


#pin重装密钥
#Key Name = PIN_RELOAD_KEY
#FuncKey=B0717DDF79E7FA67C4B73A2BD6FB1E89
/send 008400000004
/send 84D405001CFA9036597337A850BB2746EC57E82AB6E800AF38DF71A1648EA34A6C

#pin解锁密钥
#Key Name = PIN_UNBLOCK_KEY
#FuncKey=20C30BCEB1B078DCB8259D4C71692D72
/send 008400000004
/send 84D404001C011B0C42B0F9B118B2B3CB28EF6452E81CBCCC5BC8E7B3ABC59B1A5A


#消费密钥
#Key Name = PURCHASE1_KEY
#FuncKey=37C17EFA48C5C513489E5EB6C7AF939A
/send 008400000004
/send 84D406011C51005EB2E0E78D5F33DD1BEA0BA0C264D5944D7BBF603DA4CB7AEE70

#充值密钥
#Key Name = LOAD1_KEY
#FuncKey=206A7AEADA34D7D396ED5166BE858608
/send 008400000004
/send 84D407011C3D09297F9615B29C5BBFE8C875A36C3FAA2D2B73DD63FB5EB7CA1610



#TAC密钥
#Key Name = TAC_KEY
#FuncKey=B52A9EFBE06CC2CA4ED531205BDF5AC9
/send 008400000004
/send 84D408001C98709D841D3F0845D57BD098E13797E55D5B5D6EFE61D4AF67284A6D



#应用锁定密钥
#Key Name = APP_LOCK_KEY
#FuncKey=394EE8DB60A2D1359029E4EFE956FB41
/send 008400000004
/send 84D433001CC1767F607B128EFD4C43EED29EE8391847800C2576848837529BD8BE

#应用解锁密钥
#Key Name = APP_UNLOCK_KEY
#FuncKey=C3F4335E76520F8BBB018F6B1ACE48A6
/send 008400000004
/send 84D434001CD248F8D88803E794C11296D7068A4F6940FDA33B702D8366824A61B3

#测试，获取TAC密钥
/send 80030000007f
/send 80030100007f
/send 80030200007f
/send 80030300007f
/send 80030400007f
/send 80030500007f
#capp 
#/send 80030600007f
/send 80030700007f
/send 80030800007f
/send 80030900007f
/send 80030A00007f
/send 80030B00007f
/send 80030C00007f
/send 80030D00007f

#建立公共应用基本数据文件 SFI=0x15=0001 0101
#0x95=1001 0101 p2=0x00=offset
# "df:0015 公共应用基本数据文件"
# "文件内容需要替换"
# "文件格式："
# "2 发卡方代码 -可配置 默认值0731"
# "2 城市代码 -可配置 默认值4100  通过ACC-33接口获取"
# "2 行业代码 -可配置 默认值0000  通过ACC-33接口获取"
# "2 保留数据 - 0000 固定值"
# "1 应用类型标识（启用标志）  00 未启用；01启用，默认值00"
# "1 应用版本 -可配置  默认值 01"
# "2 保留数据 - 0000 固定值 "
# "8 应用序列号（逻辑卡号） - 逻辑卡号  通过ACC-35接口获取"
# "4 应用启动日期 -可配置 卡在系统中可应用使用的起始日期 取实际发卡发卡日期"
# "4 应用有效日期 -可配置 在此日期前卡片有效 通过ACC-35接口获取"
# "2 保留 -0000 固定值"
#String sfi15 = "04D69500 22 0731  4100  0000  0000  01  01  0000" + card_no + "20150605  20380808  0000";
/send 008400000004
/send 04D695002207314100000000000101000041000000999994322015060520380808000018259A74



#持卡人基本数据文件 SFI=0x16
#0x96=1001 0110
#/send 00D696005C00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007F








#复合交易记录文件 SFI=0x17
#xxxx x100按记录号,定长记录文件 
#xxxx x000按tag，变长记录文件
#p1=recordId
#sfi=0x17=0001 0111    BC=10111 100=SFI + 100记录号
#1.交易辅助记录01
#2.轨道交通记录02 
# 注意更新内容需要计算CRC
#macData = '04DC02BC 34 022E00000900000000000000000000000000900000000000000000000000000000000000000000000000000000004F95'
/send 008400000004
/send 04DC02BC34022E00000900000000000000000000000000900000000000000000000000000000000000000000000000000000004F95EA7E5DBF
#3.公交应用记录03
#4.保留记录04
#5.保留记录05
#6.保留记录09

#7.应用控制记录11
# "df:0017 第7条记录 应用控制记录文件"
# "文件内容需要替换"
# "文件格式："
# "1 复合消费标志 0x11 固定值"
# "1 记录长度0x16 固定值"
# "1 应用锁定标志 0x01 固定值"
# "1 记录版本0x00 固定值"
# "7 应用激活时间 -取发卡实际时间"
# "11 保留数据 00000000000000000000000000 -固定值"
#String sfi17 = "04DC07BC 1C 11 16 01 00 20150827172423 00000000000000000000000000";
/send 008400000004
/send 04DC07BC1C1116010020150827172423000000000000000000000000008A974F3C



#辅助信息文件 SFI=0x11=0001 0001
#0x91=1001 0001
# "df:0011 辅助信息文件"
# "文件内容需要替换"
# "文件格式："
# "1 发售激活标志  01  -卡片激活时，写入该值 固定值"
# "4 发售激活有效时间（分钟）002819A0 2年 -卡片激活时，写入该值 固定值"
# "1 发售押金（元）  0x11 17  - 可配置 发卡时写入00"
# "6 发售设备信息  -可配置 默认值000F00000001"
# "2 充值上限（元）01F4 500  -可配置 默认值01F4"
# "1 出入模式判断 默认值：00  -固定值"
# "1 可入线路 默认值：00 -固定值"
# "1 可入站点 默认值：00 -固定值"
# "1 可出线路 默认值：00 -固定值"
# "1 可出站点 默认值：00 -固定值"
# "13 保留数据 默认值：00000000000000000000000000 -固定值"
#String sfi11 = "04D6910024 01 002819A0 11 000F00000001 01F4 00 00 00 00 00 00000000000000000000000000";
/send 008400000004
/send 04D691002401002819A011000F0000000101F40000000000000000000000000000000000002DEA07D0


#保留数据文件 SFI=0x12=0001 0010
#0x92=1001 0010
#/send 00D692002000000000000000000000000000000000000000000000000000000000000000007F




#个人化结束，兼容华大智宝指令
/send 000800000000
